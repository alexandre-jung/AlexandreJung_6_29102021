var ie=Object.defineProperty,se=Object.defineProperties;var ae=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var ce=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var q=(r,e,t)=>e in r?ie(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,R=(r,e)=>{for(var t in e||(e={}))ce.call(e,t)&&q(r,t,e[t]);if(V)for(var t of V(e))le.call(e,t)&&q(r,t,e[t]);return r},U=(r,e)=>se(r,ae(e));var m=(r,e,t)=>(q(r,typeof e!="symbol"?e+"":e,t),t);const ue=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}};ue();async function de(r,e){return fetch(r).then(t=>{if(t.ok&&t.status==200)return r.slice(r.lastIndexOf(".")+1)=="json"?t.json():t.text();throw new Error(`Could not fetch ${r}`)}).then(t=>(e&&e(t),t))}class F{constructor(e){this.url=e,this.data=null}get(){return this.data?new Promise(e=>e(this.data)):de(this.url,e=>this.data=e)}}function he(r){const e=new Set;return r.photographers.forEach(t=>{t.tags.forEach(o=>{e.add(o)})}),e}class M{constructor(e,t){this.regex=e,this.viewObject=t,this.params=null}match(e){const t=e.match(this.regex);return this.params=t==null?void 0:t.groups,!!t}call(e){this.viewObject.renderView(this.params,e)}}class me{constructor(e){this.routes=[],this.contentDataFetcher=e}add(e){this.routes.push(e)}run(e){const t=this.routes.findIndex(function(n){return n.match(e)}),o=this.routes[t];if(t>=0)o.call(this.contentDataFetcher);else throw new Error(`${e} doesn't match any path`)}}class J extends Error{}class T{constructor(e){if(!e)throw new Error("You must provide a template name");this.viewName=e,this.templateURL=`/AlexandreJung_6_29102021/api/${e}.template.html`,this.sharedTemplatesURL="/AlexandreJung_6_29102021/api/shared.template.html",this.viewRoot=document.querySelector("#root"),this.templateDataFetcher=new F(this.templateURL),this.sharedTemplatesFetcher=new F(this.sharedTemplatesURL),this.templateElement=null,this.cleanUp=null}renderView(e,t){function o(i,s="An error occured."){document.body.innerHTML=`${s}<br>Details:<br>`,document.body.append(i)}(async()=>{const i=await t.get(),s=await this.templateDataFetcher.get(),a=await this.sharedTemplatesFetcher.get();return{applicationData:i,templateData:s,sharedTemplatesData:a}})().then(({applicationData:i,templateData:s,sharedTemplatesData:a})=>{var v,b,u,x;const c=document.createElement("div");c.innerHTML=a,this.templateElement=document.createElement("div"),this.templateElement.innerHTML=s,this.viewRoot.textContent="",this.viewRoot.appendChild(this.templateElement);for(const f of Array.from(c.children))document.body.append(f);window.scroll(0,0),this.cleanUp&&(this.cleanUp(),this.cleanUp=null);try{const f=document.querySelector("#page-title");f.textContent="not empty",f.style.display="none",f.setAttribute("aria-hidden",!0),this.cleanUp=this.render(e!=null?e:{},i),window.scrollTo(0,0),(v=document.querySelector('style[type="text/css"]'))==null||v.removeAttribute("type")}catch(f){f instanceof J?A.notFound.renderView(null,t):o(f)}(b=document.querySelector("#tag-template"))==null||b.remove(),(u=document.querySelector("#img-template"))==null||u.remove(),(x=document.querySelector("#video-template"))==null||x.remove()}).catch(o)}}function pe(r,e){if(!r)return[];function t(o){if(o.nodeType&&(o.nodeType==Node.ELEMENT_NODE||o.nodeType==Node.DOCUMENT_FRAGMENT_NODE)&&e(o),o.firstChild)for(const n of o.childNodes)t(n)}t(r)}function D(r){const e=[];return r&&pe(r,t=>e.push(t)),e}function j(r,e){if(r&&r.attributes&&e)for(const t of Array.from(r.attributes))e(t.name,t.value)}function fe(r,e){j(r,t=>{t.startsWith(e)&&r.removeAttribute(t)})}class E{constructor(e){this.fragment=e}static fillElement(e,t,o){j(e,(n,i)=>{if(n.startsWith(o)){const s=n.slice(o.length);if(s&&i in t)switch(s.toLowerCase()){case"text":e.textContent=t[i];break;case"style":Object.assign(e.style,t[i]);break;case"handle":break;default:e.setAttribute(s,t[i])}}})}static getElementHandles(e,t){if(!e)return{};const o=Array.isArray(e)?e:D(e),n={};return o.forEach(i=>{if(i.nodeType&&i.nodeType==Node.ELEMENT_NODE){const s=i.getAttribute(t);if(s){if(s in n)throw new Error([`${t} must be unique in template scope`,`Duplicate value: ${s}`].join(`
`));n[s]=i}}}),n}static fill(e,t={},o){return D(e).forEach(n=>{E.fillElement(n,t,o)}),e}render(e){const t=this.fragment.cloneNode(!0),o=E.getElementHandles(t,"x:handle");return E.fill(t,e,"x:"),D(t).forEach(n=>fe(n,"x:")),[t,o]}}function z(r,e){return r<0?e:r>e?0:r}function $(r){return r.endsWith(".jpg")?r.slice(0,-4)+".thumbnail.webp":r}function ge(r){return r.endsWith(".thumbnail.webp")?r.slice(0,-15)+".jpg":r}function ye(r,e){const t=document.createElement(e);return t.append(r),t}function W(r=!1){var o;const e=(o=document.querySelector("#tag-template"))==null?void 0:o.content;if(!e)throw new Error("tag template not found in the document");const t=new E(e);return(n,i=!1)=>{const[s,{tag:a}]=t.render({label:`#${n}`,href:`/AlexandreJung_6_29102021/home?filter_by=${n}`,tabindex:r?0:-1});return i&&a.classList.add("active"),s}}function ve(){var t;const r=(t=document.querySelector("#img-template"))==null?void 0:t.content;if(!r)throw new Error("img template not found in the document");const e=new E(r);return(o,n)=>{const[i,{img:s}]=e.render({src:o,title:n,tabindex:0});return s.alt=n,i}}function be(){var t;const r=(t=document.querySelector("#video-template"))==null?void 0:t.content;if(!r)throw new Error("video template not found in the document");const e=new E(r);return(o,n,i=!1)=>{const[s,{video:a}]=e.render({src:o,title:n,tabindex:0});return i&&a.setAttribute("controls",!0),s}}function K(r="/AlexandreJung_6_29102021//media/",e=!1){const t=ve(),o=be();return function(n,i,s=!1){if(n){let a=null;if(n.endsWith(".jpg")){const c=e?$(n):n;a=t(`${r}${c}`,i)}else if(n.endsWith(".mp4"))a=o(`${r}${n}`,i,s);else{console.error("unknown media format");return}return a}else console.error("param source is undefined")}}function we(r=!1){const e=K("/AlexandreJung_6_29102021/media/",!0),t=document.querySelector("#media-card-template");if(!t)throw new Error("media-card template not found in the document");const o=new E(t.content);return r&&t.remove(),(n,i,s,a,c,v)=>{const b=e(n,i),[u,{likeButton:x,mediaPlaceholder:f}]=o.render({nbLikes:s,mediaId:a,title:i,likeAriaLabel:`${s} likes`,date:new Date(c),dateReverse:new Date(c),tooltip:`${i}
${c}`});return x.disabled=v,f.append(b),x.addEventListener("click",function L(){f.firstElementChild.focus(),x.removeEventListener("click",L)}),u}}class Ee{constructor(){m(this,"show",()=>{this.previousFocus=document.activeElement,this.modal.classList.add("visible"),document.body.style.overflowY="hidden",this.setupGlobalEvents(),this.closeBtn.focus()});m(this,"hide",()=>{this.modal.classList.remove("visible"),document.body.style.overflowY="auto",this.destroyGlobalEvents(),this.previousFocus&&(this.previousFocus.scrollIntoView({block:"center",behavior:"smooth"}),this.previousFocus.focus({preventScroll:!0}),this.previousFocus=null)});m(this,"hideOnEscapeKey",e=>{e.key=="Escape"&&this.hide()});m(this,"handleArrowKeys",e=>{e.target.nodeName!="VIDEO"&&(e.key=="ArrowLeft"?this.previous(e):e.key=="ArrowRight"&&this.next(e))});m(this,"previous",()=>{this.update(this.previousBtn.dataset.ref),this.previousFocus=document.querySelector(`[src="${this.currentMediaSource}"]`)});m(this,"next",()=>{this.update(this.nextBtn.dataset.ref),this.previousFocus=document.querySelector(`[src="${this.currentMediaSource}"]`)});m(this,"trapFocusWithin",e=>{e.key=="Tab"&&(e.target===this.nextBtn&&!e.getModifierState("Shift")?(e.preventDefault(),this.closeBtn.focus()):e.target===this.closeBtn&&e.getModifierState("Shift")&&(e.preventDefault(),this.nextBtn.focus()))});m(this,"releaseFocus",()=>{document.removeEventListener("keydown",this.trapFocusWithin)});this.modal=document.querySelector(".lightbox"),this.previousBtn=this.modal.querySelector(".btn-previous"),this.nextBtn=this.modal.querySelector(".btn-next"),this.closeBtn=this.modal.querySelector(".btn-close"),this.placeholder=this.modal.querySelector(".lightbox-placeholder"),this.allMediaSources=null,this.mediaFactory=K(""),this.previousFocus=null,this.setupEvents()}setupEvents(){this.closeBtn.addEventListener("click",this.hide),this.previousBtn.addEventListener("click",this.previous),this.nextBtn.addEventListener("click",this.next)}setupGlobalEvents(){window.addEventListener("popstate",this.hide),document.addEventListener("keydown",this.hideOnEscapeKey),document.addEventListener("keydown",this.handleArrowKeys),document.addEventListener("keydown",this.trapFocusWithin)}destroyGlobalEvents(){window.removeEventListener("popstate",this.hide),document.removeEventListener("keydown",this.hideOnEscapeKey),document.removeEventListener("keydown",this.handleArrowKeys),this.releaseFocus()}setAllMediaSources(e){this.allMediaSources=e.map(t=>t.src),this.allMediaTitles=e.map(t=>t.title)}update(e){const t=this.allMediaSources.indexOf(e),o=this.allMediaSources[z(t-1,this.allMediaSources.length-1)],n=this.allMediaSources[z(t+1,this.allMediaSources.length-1)],i=this.allMediaTitles[t];this.currentMediaSource=e;function s(){const c=document.createElement("h2");return c.textContent=i,c.classList.add("lightbox-title"),c}const a=this.mediaFactory(ge(e),i,!0);this.placeholder.textContent="",this.placeholder.append(a),this.placeholder.append(s()),this.previousBtn.dataset.ref=o,this.nextBtn.dataset.ref=n}}class xe{constructor(e){m(this,"toggle",()=>this.expanded?(this.element.dataset.isClosing=!0,setTimeout(()=>{this.expanded=!1,this.element.dataset.isClosing=!1},150),!1):this.expanded=!0);this._element=e}get element(){return this._element}get expanded(){return this._element.dataset.expanded=="true"}set expanded(e){this._element.dataset.expanded=String(e)=="true"}get value(){return this.element.dataset.value}set value(e){this.onValueChange&&this.onValueChange(e),this.element.dataset.value=e}}class G{constructor(e){m(this,"focus",()=>{this._element.tabIndex=0,this._element.focus()});m(this,"blur",()=>{this._element.tabIndex=-1,this._element.blur()});this._element=e}get element(){return this._element}get tabFocusable(){return this._element.tabIndex!="-1"}set tabFocusable(e){this._element.tabIndex=e?0:-1}}class Se extends G{constructor(e,t){super(e);this.valuePlaceholder=t}get label(){return this.valuePlaceholder.textContent}set label(e){this.valuePlaceholder.textContent=e}}class ke extends G{constructor(e,t){super(e);m(this,"setActiveDescendant",e=>{this.element.setAttribute("aria-activedescendant",e)});var o,n;this._items=Array.from(t),this._length=(n=(o=this._items)==null?void 0:o.length)!=null?n:0,this._currentCounter=new H(this._length),this._activeIndex=new H(this._length),this._options=Array.from(t!=null?t:[]).map(i=>{const s=new Le(i);return s.onSelect=this.setActiveDescendant,s}),this._length&&(this.currentOption.selected=!0,this.currentOption.active=!0)}next(){this._options[this._currentCounter.current].selected=!1,this._options[this._currentCounter.next()].selected=!0}previous(){this._options[this._currentCounter.current].selected=!1,this._options[this._currentCounter.previous()].selected=!0}selectCurrent(){this._options[this._activeIndex.current].active=!1,this._options[this._activeIndex.current].selected=!1,this._options[this._currentCounter.current].active=!0,this._options[this._currentCounter.current].selected=!0,this._activeIndex.current=this._currentCounter.current,this.onValueChange(this.activeOption.value,this.activeOption.label)}selectPrevious(){this.previous(),this.selectCurrent()}selectNext(){this.next(),this.selectCurrent()}get length(){return this._length}get items(){var e;return(e=this._items)!=null?e:[]}get currentActiveIndex(){return this._activeIndex.current}get currentOption(){return this._options[this._currentCounter.current]}get activeOption(){return this._options[this._activeIndex.current]}setCurrentOption(e){this._options[this._currentCounter.current].selected=!1,this._currentCounter.current=e,this._options[e].selected=!0}getOptionByIndex(e){return this._length&&e>=0&&e<this._length?this._options[e]:null}findOptionIndexByValue(e){return this._items.findIndex(function(t){return t.dataset.value==e})}setActiveOption(e){if(e&&this.length){const t=this.findOptionIndexByValue(e);this.setCurrentOption(t),this.selectCurrent()}}}class Le{constructor(e){this.element=e}get label(){return this.element.textContent}set label(e){this.element.textContent=e}get value(){return this.element.dataset.value}set value(e){this.element.dataset.value=e}get selected(){return this.element.dataset.selected}set selected(e){this.onSelect&&this.onSelect(this.element.id),this.element.dataset.selected=e}get active(){return this.element.dataset.active}set active(e){this.element.setAttribute("aria-selected",e),this.element.dataset.active=e}}class H{constructor(e,t=0){this._size=Number(e)>=0?Number(e):0,this._current=Number(t)}get current(){return this._current}set current(e){e<0?this._current=0:e>=this._size?this._current=this._size-1:this._current=Number(e)}previous(){return this.current>0?--this.current:this.current}next(){return this.current<this._size-1?++this.current:this.current}}function Y(r){const e=new xe(document.querySelector(".dropdown"));if(e.element){const t=new Se(e.element.querySelector(".dropdown-toggle"),e.element.querySelector(".dropdown-value")),o=new ke(e.element.querySelector(".dropdown-list"),e.element.querySelectorAll(".dropdown-item"));o.currentOption&&(t.label=o.currentOption.label,t.value=o.currentOption.value),t.element.addEventListener("click",function(n){e.toggle()&&(o.focus(),t.blur(),n.stopPropagation(),document.addEventListener("click",function i(){document.removeEventListener("click",i),e.expanded&&(e.toggle(),t.focus())}))}),t.element.addEventListener("keydown",function(n){switch(n.key){case"ArrowUp":o.selectPrevious();break;case"ArrowDown":o.selectNext();break}}),o.element.addEventListener("click",function(n){o.setActiveOption(n.target.dataset.value),o.focus()}),o.element.addEventListener("keydown",function(n){switch(n.key){case"ArrowUp":o.previous(),n.preventDefault();break;case"ArrowDown":o.next(),n.preventDefault();break;case"Enter":o.selectCurrent(),o.blur(),t.focus(),e.toggle(),n.preventDefault();break;case"Escape":case"Tab":o.blur(),t.focus(),e.expanded=!1;break}}),o.onValueChange=function(n,i){t.label=i,e.value=n},e.onValueChange=r}}Y();function _e(r){const e=document.querySelector(".contact-modal"),t=document.querySelector(".modal-close"),o=e.querySelector("form");function n(){e.classList.remove("visible"),document.body.style.overflowY="auto",t.removeEventListener("click",n),o.removeEventListener("submit",i),document.removeEventListener("keydown",n),window.removeEventListener("popstate",n),e.removeEventListener("keydown",b),r&&r(),Ce(o)}function i(u){u.preventDefault(),Ae(o)?n():console.log("Le formulaire n'a pas \xE9t\xE9 correctement rempli")}Array.from(o.elements).filter(I).forEach(function(u){u.dataset.invalid=!1,u.nextElementSibling.style.visibility="hidden"}),e.classList.add("visible"),document.body.style.overflow="hidden";const c=e.querySelector("input"),v=e.querySelector("input:last-child");function b(u){u.key=="Tab"&&(u.target==c&&u.getModifierState("Shift")?(u.preventDefault(),v.focus()):u.target==v&&!u.getModifierState("Shift")&&(u.preventDefault(),c.focus()))}e.addEventListener("keydown",b),c.focus(),t.addEventListener("click",n),o.addEventListener("submit",i),document.addEventListener("keydown",function(u){u.key=="Escape"&&n()}),window.addEventListener("popstate",n)}function Ce(r){Array.from(r.elements).filter(I).forEach(Z)}function Ae(r){const e=Array.from(r.elements),t=e.filter(I);if(t.every(X)){const o=e[0].value;return alert(`Merci, ${o} !

Vos informations ont \xE9t\xE9 correctement renseign\xE9es.`),t.forEach(function(n){qe(n),Z(n)}),!0}return t.forEach(function(o){if(X(o)){o.dataset.invalid=!1;const n=o.nextElementSibling;n.style.visibility="hidden",n.setAttribute("aria-invalid",!1)}else{o.dataset.invalid=!0;const n=o.nextElementSibling;n.style.visibility="visible",n.setAttribute("aria-invalid",!0)}}),!1}function I(r){return r.getAttribute("type")!="submit"}function Z(r){r.value="",r.dataset.invalid=!1;const e=r.nextElementSibling;e.style.visibility="hidden",e.setAttribute("aria-invalid",!1)}function qe(r){console.log(`%c${r.dataset.label}:%c ${r.value.trim()}`,"color: gray; font-style: italic","color: black; font-weight: bold")}const Q={text:/^[a-zA-Z]{2,}(?:-[a-zA-Z]{2,})?$/,email:/^[a-z0-9]+([+._-][a-z0-9]+)*@[a-z0-9]+(-[a-z]+)*(\.[a-z]{2,})+$/},Fe={textarea:r=>r.value.trim()!="",input:r=>r.type in Q&&Q[r.type].test(r.value.trim())};function X(r){const e=r.tagName.toLowerCase();return Fe[e](r)}class _ extends T{constructor(){super("photographer");m(this,"render",({id:e},t)=>{this.lightbox||(this.lightbox=new Ee);const o=t.photographers.findIndex(function(l){return l.id==e});if(o==-1)throw new J("Photographer not found");const n=document.querySelector("nav");n.style.display="none";const i=t.photographers[o],s=document.querySelector("title"),a=document.querySelector("#photographer-name-title");s.textContent=`${i.name} | Fisheye`,a.textContent=i.name;const c=document.querySelector(".hero"),v=c.querySelector(".city"),b=c.querySelector(".country"),u=c.querySelector(".tagline"),x=c.querySelector(".tag-list"),f=c.querySelector(".profile-image");v.textContent=i.city,b.textContent=i.country,u.textContent=i.tagline,f.setAttribute("src",$(`/AlexandreJung_6_29102021/media/${i.portrait}`)),f.alt=i.name,_.renderTags(x,i.tags);const L=t.media.filter(function(l){return l.photographerId==i.id});let N=L.reduce((l,p)=>l+p.likes,0);function O(l){let p=l.target.closest(".btn.btn-like");if(p){const h=p.querySelector(".total-likes");if(h&&!p.disabled){const w=t.media.findIndex(function(d){return d.id==h.dataset.mediaId});if(w!=-1){const d=t.media[w];if(!d.alreadyLiked){let g=+h.dataset.value;h.dataset.value=++g,h.textContent=g,p.disabled=!0,p.blur(),d.likes++,d.alreadyLiked=!0,p.closest("[data-popularity]").dataset.popularity++,document.querySelector("#insert-likes-value").textContent=++N}}}}}document.addEventListener("click",O);const ee=we(!0),te=document.querySelector("#media-root"),k=document.createElement("div");k.classList.add("grid"),L.forEach(function(l){var w;const p=ee((w=l.image)!=null?w:l.video,l.title,l.likes,l.id,l.date,l.alreadyLiked),h=p.querySelector(".card-photo");k.append(p),h.querySelector("img, video").addEventListener("mousedown",d=>d.target.dataset.clicked=!0),h.querySelector("img, video").addEventListener("focus",({target:d})=>{if(d.dataset.clicked=="true"){d.dataset.clicked=!1;return}const S=d.closest(".media-placeholder");S.classList.add("outline-primary"),d.addEventListener("blur",()=>S.classList.remove("outline-primary")),d.scrollIntoView({block:"center",behavior:"smooth"})})}),te.append(k);const B=(l="popularity")=>{const h=Array.from(k.children).sort(function(d,S){let g=d.dataset[l].toLowerCase(),y=S.dataset[l].toLowerCase();switch(l){case"popularity":[y,g]=[Number(g),Number(y)];break;case"date":[g,y]=[new Date(g),new Date(y)];break;case"dateReverse":[y,g]=[new Date(g),new Date(y)];break}return g==y?0:g<y?1:-1}),w=[];return h.forEach(function(d){k.insertBefore(d,k.children[0]);let S=d.querySelector("img, video");const g=S.dataset.ref,y=S.dataset.title;w.unshift({src:g,title:y})}),this.lightbox.setAllMediaSources(w),w},ne=B();Y(B),this.lightbox.setAllMediaSources(ne),document.querySelectorAll("#media-root img, #media-root video").forEach(l=>{const p=h=>{(h.type=="click"||h.type=="keydown"&&h.key=="Enter")&&(this.lightbox.update(h.target.dataset.ref),this.lightbox.show(h),h.preventDefault())};l.addEventListener("click",p),l.addEventListener("keydown",p)}),document.querySelector("#insert-likes-value").textContent=N,document.querySelector("#insert-daily-charge").textContent=i.price;const P=document.querySelector(".contact"),re=document.querySelector("#contact-photographer-name");function oe(){P.focus()}return P.addEventListener("click",()=>_e(oe)),re.textContent=i.name,location.hash=="#root"&&history.pushState(null,null,location.pathname+"#media-root"),document.body.focus(),location.hash=="#media-root"&&setTimeout(()=>{var l;return(l=document.querySelector(".media-placeholder video, .media-placeholder img"))==null?void 0:l.focus()},0),function(){document.removeEventListener("click",O)}});this.lightbox=null}static renderTags(e,t,o,n=!1){if(e){e.textContent="";const i=W(n);t.forEach(s=>{e.append(i(s,s==o))})}}}class C extends T{constructor(){super("home");m(this,"render",(e,t)=>{const o=document.querySelector("nav"),n=document.querySelector("#page-title");o.style.display="block",n.textContent="Nos photographes",n.style.display="block",n.setAttribute("aria-hidden",!1);const i=document.querySelector("title");i.textContent="Accueil | Fisheye";const s=new URLSearchParams(location.search).get("filter_by");let a=t.photographers;if(s&&(a=a.filter(c=>c.tags.includes(s))),C.renderTags(document.querySelector("#tags"),he(t),s,!0),C.renderPhotographers(a),location.hash=="#root")setTimeout(()=>{var c;return(c=document.querySelector(".card-photographer .image-link"))==null?void 0:c.focus()},0);else{const c=document.querySelector(".btn-tag.active");c?(c.focus(),c.blur()):document.body.focus()}})}static renderPhotographers(e){const t=document.querySelector("#photographer-template"),o=document.querySelector("#photographers"),n=new E(t.content);e.forEach(i=>{const[s,{link:a,tagList:c}]=n.render(U(R({},i),{href:"/AlexandreJung_6_29102021/photographer/"+i.id,thumbnail:$("/AlexandreJung_6_29102021/media/"+i.portrait),descriptionId:`photographer-description-${i.id}`}));a.addEventListener("mousedown",()=>a.dataset.clicked=!0),a.addEventListener("focus",()=>{if(a.dataset.clicked=="true"){a.dataset.clicked=!1;return}a.classList.add("focused"),a.scrollIntoView({block:"center",behavior:"smooth"})}),a.addEventListener("blur",()=>{a.classList.remove("focused")}),_.renderTags(c,i.tags),o.append(s)}),t.remove()}static renderTags(e,t,o,n=!1){if(e){e.textContent="";const i=W(n);t.forEach(s=>{const a=i(s,s==o);e.append(ye(a,"li"))})}}}class Me extends T{constructor(){super("notFound");m(this,"render",()=>{const e=document.querySelector("title"),t=document.querySelector("#page-title");e.textContent="Page introuvable | Fisheye",t.textContent="Page introuvable",t.style.display="block",t.setAttribute("aria-hidden",!1)})}}const A={home:new C,photographer:new _,notFound:new Me},Te=[new M("^/AlexandreJung_6_29102021/photographer/(?<id>\\d+)/?$",A.photographer),new M("^/AlexandreJung_6_29102021/(home/?)?(?:\\?.*)?$",A.home),new M(".*",A.notFound)];function De(){const r=new F("/AlexandreJung_6_29102021/api/data.json"),e=new me(r);Te.forEach(function(n){e.add(n)});function t(n){const i=new URL(n),s=i.pathname+i.search;history.pushState({},"",s),e.run(s)}document.addEventListener("click",function(n){if(n.target.nodeName.toLowerCase()=="a"&&n.target.rel=="tag")n.preventDefault(),t(n.target.href);else if(n.target.hasAttribute("data-navlink")){const i=n.target.closest("[rel=tag]");n.preventDefault(),t(i.href)}}),window.addEventListener("popstate",function(n){e.run(window.location.pathname,n.state)}),t(location);const o=document.querySelector("#home-link");o&&(o.href="/AlexandreJung_6_29102021/")}document.addEventListener("DOMContentLoaded",De);
